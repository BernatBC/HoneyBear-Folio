   Compiling HoneyBear-Folio v0.1.0 (/home/bernat/Documents/Code/HoneyBear-Folio/app/src-tauri)
warning: unused variable: `cash_idx`
  --> src/tests/property/property_invariants.rs:81:17
   |
81 |             let cash_idx = (brokerage_idx + 1) % accounts.len();
   |                 ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_cash_idx`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `b`
  --> src/tests/property/property_proptest.rs:59:21
   |
59 |                 let b = (a+1)%accounts.len();
   |                     ^ help: if this is intentional, prefix it with an underscore: `_b`

warning: `HoneyBear-Folio` (lib test) generated 2 warnings (run `cargo fix --lib -p HoneyBear-Folio --tests` to apply 2 suggestions)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 4.54s
     Running unittests src/lib.rs (target/debug/deps/app_lib-d7046e7433e65ef8)

running 75 tests
test tests::accounts::create_account::test_create_duplicate_account_case_insensitive_should_error ... ok
test tests::accounts::rename_account::test_rename_account ... ok
test tests::accounts::create_account::test_create_account_negative_balance_creates_initial_tx ... ok
test tests::accounts::create_account::test_create_account_zero_balance_no_initial_tx ... ok
test tests::accounts::create_account::test_create_duplicate_account_should_error ... ok
test tests::accounts::create_account::test_create_account ... ok
test tests::accounts::create_account::test_create_account_initial_tx_details ... ok
test tests::app::settings_edge_cases::test_read_settings_invalid_json_should_error ... ok
test tests::app::settings_tests::test_get_db_path_override_creates_parent_dir ... ok
test tests::app::settings_tests::test_write_and_read_settings ... ok
test tests::accounts::delete_account::test_delete_account ... ok
test tests::accounts::create_account::test_get_accounts_returns_all ... ok
test tests::accounts::rename_account::test_rename_account_duplicate_name_should_error ... ok
test tests::accounts::create_account::test_create_account_duplicate_should_error ... ok
test tests::accounts::rename_account::test_rename_account_missing_id_should_error ... ok
test tests::accounts::rename_account::test_rename_account_empty_should_error ... ok
test tests::brokerage::brokerage_transaction::test_create_investment_transaction_missing_account_should_error ... ok
test tests::accounts::delete_account::test_delete_account_with_transactions ... ok
test tests::brokerage::update_brokerage_transaction::test_update_investment_transaction_missing_id_should_error ... ok
test tests::app::settings_tests::test_init_db_adds_linked_tx_column ... ok
test tests::brokerage::brokerage_transaction::test_investment_transaction_buy ... ok
test tests::brokerage::brokerage_transaction::test_investment_transaction_sell ... ok
test tests::errors::error_handling_tests::test_read_settings_unreadable_file_errors ... ok
test tests::errors::error_handling_tests::test_set_db_path_parent_creation_permission_error ... ok
test tests::errors::error_handling_tests::test_write_settings_to_readonly_dir_errors ... ok
test tests::app::app_handle_tests::test_app_handle_db_path_set_and_reset ... ok
test tests::errors::api_error_tests::test_get_transactions_nonexistent_account_returns_empty ... ok
test tests::brokerage::update_brokerage_transaction::test_update_investment_transaction_custom_notes ... ok
test tests::brokerage::update_brokerage_transaction::test_update_investment_transaction_sell_changes_amounts ... ok
test tests::brokerage::update_brokerage_counterpart_absent::test_delete_investment_transaction_updates_balance ... FAILED
test tests::brokerage::update_brokerage_move::test_update_investment_transaction_move_between_accounts ... ok
test tests::brokerage::update_brokerage_transaction::test_update_investment_transaction_updates_balance ... ok
test tests::errors::api_error_tests::test_delete_account_with_missing_id_noop ... ok
test tests::app::commands_integration::test_create_account_and_transaction_via_helpers ... ok
test tests::payees::payees_categories::test_get_payees_and_categories_empty ... ok
test tests::app::concurrent_init_db::test_concurrent_init_db_is_idempotent ... ok
test tests::payees::payees_categories::test_payees_and_categories_sorted ... ok
test tests::stock::stock_http_mock_tests::test_get_stock_quotes_change_percent_div_by_zero_guard ... ok
test tests::payees::payees_categories::test_get_payees_and_categories ... ok
test tests::stock::all_network_fail_no_db::test_get_stock_quotes_all_network_fail_and_no_db_fallback ... ok
test tests::stock::daily_prices_tests::test_get_daily_stock_prices_from_path_ordering ... ok
test tests::stock::stock_http_mock_tests::test_search_ticker_with_mock_server ... ok
test tests::stock::stock_parsing_tests::test_chart_response_parsing_change_percent ... ok
test tests::stock::stock_parsing_tests::test_search_response_deserialize ... ok
test tests::stock::stock_http_tests::test_search_ticker_success ... ok
test tests::stock::daily_prices_tests::test_update_replaces_existing ... ok
test tests::stock::daily_prices_tests::test_update_daily_stock_prices_inserts_prices ... ok
test tests::stock::stock_http_mock_tests::test_get_stock_quotes_malformed_json_uses_db_fallback ... ok
test tests::transactions::create_transaction::test_create_transaction_preserves_nontransfer_category ... ok
test tests::stock::stock_http_mock_tests::test_get_stock_quotes_partial_failure_uses_db_fallback ... ok
test tests::stock::stock_http_tests::test_get_stock_quotes_with_partial_fail_and_db_fallback ... ok
test tests::transactions::create_transaction::test_create_transaction_with_nonexistent_account_errors_due_to_foreign_key ... ok
test tests::transactions::create_transaction::test_create_transaction ... ok
test tests::stock::stock_http_mock_tests::test_get_stock_quotes_with_db_fallback ... ok
test tests::stock::url_edge_cases::test_get_stock_quotes_base_url_trailing_slash_works ... ok
test tests::transactions::create_transaction::test_create_transaction_transfer_details ... ok
test tests::transactions::create_transaction::test_create_transaction_with_ticker_shares_price_fee ... ok
test tests::transactions::delete_transaction::test_delete_transaction_missing_id_should_error ... ok
test tests::transactions::delete_transaction::test_delete_transaction ... ok
test tests::transactions::create_transaction::test_get_transactions_ordering ... ok
test tests::transactions::create_transaction::test_get_all_transactions ... ok
test tests::transactions::transaction_edge_cases::test_create_transaction_payee_same_account_name_no_transfer_created ... ok
test tests::transactions::delete_transaction::test_delete_transaction_fallback_by_notes ... ok
test tests::transactions::update_transaction::test_update_transaction_missing_id_should_error ... ok
test tests::transactions::delete_transaction::test_delete_transaction_deletes_linked_counterpart ... ok
test tests::transactions::update_transaction::test_update_transaction ... ok
test tests::transactions::transaction_edge_cases::test_update_transaction_move_between_accounts ... ok
test tests::transactions::update_transaction::test_update_transaction_finds_counterpart_by_notes ... ok
test tests::transactions::transfer::test_transfer ... ok
test tests::transactions::update_transaction::test_update_transaction_no_amount_change_doesnt_alter_balances ... ok
test tests::transactions::update_transaction::test_update_transaction_updates_counterpart_when_linked ... ok
test tests::property::property_invariants::test_randomized_balance_invariants ... ok
test tests::stock::concurrency_stress::test_get_stock_quotes_concurrency_stress ... ok
test tests::errors::error_handling_tests::test_db_locked_write_fails ... ok
test tests::property::property_proptest::prop_balance_and_link_invariants ... ok

failures:

---- tests::brokerage::update_brokerage_counterpart_absent::test_delete_investment_transaction_updates_balance stdout ----

thread 'tests::brokerage::update_brokerage_counterpart_absent::test_delete_investment_transaction_updates_balance' (35627) panicked at src/tests/brokerage/update_brokerage_counterpart_absent.rs:32:5:
assertion `left == right` failed
  left: 1
 right: 0
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::brokerage::update_brokerage_counterpart_absent::test_delete_investment_transaction_updates_balance

test result: FAILED. 74 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 30.42s

error: test failed, to rerun pass `--lib`
